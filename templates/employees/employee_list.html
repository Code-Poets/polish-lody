{% extends 'polishlody/base.html' %}

{% block title %}Employee list{% endblock %}
        
{% block body_block %}

    <center>
        <h4>Employee list</h4>
    </center>
    <a href="{% url 'employee_new' %}" class="btn btn-success pull-right"><span class="glyphicon glyphicon-plus" aria-hidden="true"></span> Add employee</a><br><br>
    {% if all_employee_list %}
        <table class="table table-hover sortable">
            <tr>
                <td class="cursor-hover" align="center" valign="middle">
                    <b>Full name</b>
                </td>
                <td class="cursor-hover" align="center" valign="middle">
                    <b>Rate per hour (zł)</b>
                </td>
                <td class="cursor-hover" align="center" valign="middle">
                    <b>Position</b>
                </td>
                <td class="cursor-hover" align="center" valign="middle">
                    <b>Contract expiration date</b>
                </td>
                <td class="cursor-hover" align="center" valign="middle">
                    <b>Health book expiration date</b>
                </td>
                <td class="cursor-hover" align="center" valign="middle">
                    <b>Total unpaid salaries (zł)</b>
                </td>
                <td>
                </td>
            </tr>
            {% for employee in all_employee_list %}
            <tr>
                <td>
                    <a href="{% url 'employee_detail' employee.pk %}">{{ employee.full_name }}</a>
                </td>
                <td align="center" valign="middle">
                    {{ employee.rate_per_hour }}
                </td>
                <td align="center" valign="middle">
                    {{ employee.position }}
                </td>
                <td align="center" valign="middle">
                    {{ employee.contract_exp_date|date:"d.m.Y" }}
                </td>
                <td align="center" valign="middle">
                    {{ employee.health_book_exp_date|date:"d.m.Y" }}
                </td>
                <td class="sorttable_numeric" align="center" valign="middle">
                    {% if employee.all_unpaid_salaries == 0 %}
                    0.00
                    {% elif employee.all_unpaid_salaries != 0 and employee.all_unpaid_salaries != None %}
                    {{ employee.all_unpaid_salaries }}
                    {% else %}
                    No salary data.
                    {% endif %}
                </td>
                <td align="right">
                    <a href="{% url 'employee_edit' employee.id %}" class="btn btn-default"><span class="glyphicon glyphicon-pencil" aria-hidden="true"></span> Edit</a>
                    <a href="{% url 'employee_delete' employee.id %}" class="btn btn-danger">Delete</a>
                </td>
            </tr>
            {% endfor %} 
        </table>
    {% else %}
        <p>The list of employees is empty</p>
    {% endif %}

{% endblock %}